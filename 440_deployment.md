## Deployment {#sec:deployment}
Der Begriff Deployment beschreibt die Veröffentlichung einer Applikation auf das Produktivsystem und damit an den Endnutzer. An die Ausführung der Applikation in dieser Phase sind sehr viel höhere Anforderungen gestellt als während der Entwicklung. So gilt es beispielsweise auf mögliche Lastspitzen, welche während der Entwicklung wenn überhaupt nur in kontrollierten Tests auftreten, schnell und möglichst sogar automatisiert reagieren zu können. Außerdem ist es Notwendig eine möglichst hohe Verfügbarkeit zu garantieren -- also, dass die Applikation rund um die Uhr an jedem Tag des Jahres erreichbar ist und auch gegen eventuelle Stromausfälle oder andere unerwartete Ereignisse abgesichert ist.

Für Lawly wird dafür aktuell auf zwei unabhängige Anbieter gesetzt. Für Server und Datenbank werden jeweils \ac{AWS} Instanzen verwendet. Die API läuft dabei auf einer durch *ElasticBeanstalk* verwalteten \ac{EC2} Instanz und interagiert mit einer auf Amazons \acf{RDS} betriebenen PostgreSQL-Datenbank. Die Client-Applikation tritt im Gegensatz dazu sehr viel kleiner: Sie wird von einem Server bei Uberspace[^uberspace], einem relativ kleinen deutschen Hoster aus Frankfurt, ausgeliefert.

[^uberspace]: [uberspace.de](https://uberspace.de)

Aus der breiten Front der Cloud-Anbieter fiel hierbei die Wahl auf Amazon, da nur dieser PostgreSQL in seiner neusten Version als verwaltetes Datenbanksystem anbietet. Die neuste Version ist aufgrund des geplanten Einsatzes von nur in dieser Version verfügbaren JSON-Funktionalitäten erforderlich. Zwar ist es bei allen Anbietern möglich, selbst verwaltete Instanzen zu betreiben, allerdings meist mit höheren Kosten und insbesondere einem höheren Aufwand als bei einem verwalteten System verbunden. Zusätzlich kommt ElasticBeanstalk als eine angenehme weitere Abstraktionsebene ohne zusätzliche Mehrkosten gegenüber einer selbstverwalteten \ac{EC2}-Instanz mit komfortablen Commandline-Tools und einer engen Verknüpfung zur eingesetzten `git`-Versionsverwaltung daher. So kann ElasticBeanstalk sich zum Beispiel mit wenigen Klicks um die automatische horizontale Skalierung der \ac{API} und der damit zusammenhängenden Konfiguration des Load-Balancers kümmern. Außerdem übernimmt der Service selbstständig eigentlich komplexe Operationen wie das fließende Aktualisieren der Applikation ohne zwischenzeitliche Downtime.

Für den bei Uberspace betriebenen Server wird hingegen nur eine sehr niedrige Last erwartet, da er nur mit der Auslieferung der statischen Dateien betraut ist und diese, wie zuvor beschrieben, durch intensives Caching auf Clientseite nur selten erneut angefragt werden müssen. Anfragen werden hierbei mithilfe einfacher Apache Umschreibungen an die richtigen Dateien dirigiert -- es wird an dieser Stelle keine Node.js-Instanz betrieben. Dies ist allerdings nur eine vorläufige Lösung. Langfristig soll auch an diese Stelle ein Node.js-Server treten der sich um \acf{SSR} kümmert. Auf den vorläufigen Wegfall von \ac{SSR} wurde bereits in Abschnitt @sec:spa eingegangen. Voraussichtlich wird dann auch dieser Teil der Applikation auf eine eigene ElasticBeanstalk-Instanz umgestellt.
