## Deployment
Der Begriff Deployment beschreibt die Veröffentlichung einer Applikation auf das Produktivsystem und damit an den Endnutzer. An die Ausführung der Applikation in dieser Phase sind sehr viel höhere Anforderungen gestellt als während der Entwicklung. So gilt es zum Beispiel auf mögliche Lastspitzen, welche während der Entwicklung wenn überhaupt nur in kontrollierten Tests auftreten, schnell oder sogar automatisiert reagieren zu können. Außerdem ist es Notwendig eine möglichst hohe Verfügbarkeit zu garantieren -- also, dass die Applikation rund um die Uhr an jedem Tag des Jahres erreichbar ist und auch gegen eventuelle Stromausfälle oder andere unerwartete Ereignisse abgesichert ist.

Um dies zu garantieren wird für Lawly auf auf eine Kombination von zwei Anbietern gesetzt. Für Server und Datenbank werden jeweils \ac{AWS} Instanzen verwendet. Die API läuft dabei auf einer durch *Elastic Beanstalk* verwalteten \ac{EC2} Instanz und interagiert mit einer über \ac{RDS} betriebenen PostgreSQL Datenbank. Die Client-Applikation tritt im Gegensatz dazu sehr viel kleiner: Sie wird von einem Server bei Uberspace, einem relativ kleinen deutschen Hoster aus Frankfurt, ausgeliefert. Nur das Applikationsbundle und dazugehörige Stylesheet, die beiden größten Dateien, werden über Amazons \ac{S3} verteilt.

Aus der breiten Front der Cloud-Anbieter fiel hierbei die Wahl auf Amazon, da nur dieser PostgreSQL in seiner neusten Version als verwaltetes Datenbanksystem anbietet. Zwar ist bei allen Anbietern möglich eigene Instanzen zu betreiben, allerdings durch die Bank mit höheren Kosten und einem höheren Aufwand als bei einem verwalteten System verbunden. Zusätzlich kommt ElasticBeanstalk als eine angenehme weitere Abstraktionsebene ohne zusätzliche Mehrkosten gegenüber einer selbstverwalteten \ac{EC2}-Instanz mit komfortablen Commandline-Tools und einer engen Verknüpfung zur git-Versionsverwaltung (welche sowieso im Entwicklungsprozess eingesetzt wird) daher. So kann ElasticBeanstalk sich zum Beispiel mit wenigen Klicks um die automatische horizontale Skalierung der API und der damit zusammenhängenden Konfiguration des Load-Balancers kümmern. Außerdem kümmert sich der Service selbstständig um das fließende aktualisieren der Applikation ohne sie zwischenzeitig komplett vom Netz zu nehmen.

Für den bei uberspace betriebenen Server wird hingegen nur eine sehr niedrige Last erwartet, da er nur mit der Auslieferung einer Handvoll ungefähr 100kb großer App-Shells betreut ist. Anfragen werden hierbei mithilfe einfacher Apache RewriteRules an die richtigen Dateien dirigiert -- es wird an dieser Stelle keine Node.js Instanz betrieben. Dies ist allerdings nur ein vorläufiger Hack, langfristig soll auch in Produktion serverseitiges Rendering eingesetzt werden, so dass auch dieser Teil der Applikation dann voraussichtlich auf Elastic Beanstalk umgestellt wird. Auf den Wegfall von \ac{SSR} in Produktion wird in Abschnitt @sec:client eingegangen.

Langfristig, und aktuell schon in Bezug auf API und Datenbank, ist es aus sicherheits- und komfortrelevanten Aspekten erstrebenswert alle Systeme bei dem gleichen Anbieter zu betreiben. Dadurch ist es zum Beispiel möglich \acp{VPC} einzusetzen und die Datenbank so komplett von der Außenwelt abzugrenzen und nur von innerhalb des Netzwerkes Zugriffe zu erlauben.
